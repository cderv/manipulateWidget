<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Even More Interactivity To Interactive Charts • manipulateWidget</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">manipulateWidget</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/manipulateWidgets.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="news/index.html">Change Log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rte-antares-rpackage/manipulateWidget">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="index_files/htmlwidgets-0.8/htmlwidgets.js"></script><link href="index_files/combineWidgetStyle-0.1/combineWidgets.css" rel="stylesheet">
<script src="index_files/combineWidgets-binding-0.4.0/combineWidgets.js"></script><script src="index_files/jquery-1.11.1/jquery.min.js"></script><link href="index_files/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="index_files/dygraphs-1.1.1/dygraph-combined.js"></script><script src="index_files/moment-2.8.4/moment.js"></script><script src="index_files/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="index_files/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="index_files/dygraphs-binding-1.1.1.4/dygraphs.js"></script><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- [![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/manipulateWidget)](http://cran.r-project.org/package=manipulateWidget) -->
<p>This R package is largely inspired by the <code>manipulate</code> package from Rstudio. It provides the function `<code>manipulateWidget</code> that can be used to create in a very easy way a graphical interface that let the user modify the data or the parameters of an interactive chart. Technically, the function generates a Shiny gadget, but the user does not even have to know what is Shiny.</p>
<p>The package also provides the <code>combineWidgets</code> function to easily combine multiple interactive charts in a single view. Of course both functions can be used together.</p>
<p>Here is an example that uses packages <code>dygraphs</code> and <code>plot_ly</code>.</p>
<div class="figure">
<img src="vignettes/fancy-example.gif" alt="An example of what one can do with manipulateWidgets"><p class="caption">An example of what one can do with manipulateWidgets</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>The package can be installed from CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"manipulateWidget"</span>)</code></pre></div>
<p>You can also install the latest development version from github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"rte-antares-rpackage/manipulateWidget"</span>, <span class="dt">ref=</span><span class="st">"develop"</span>)</code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"> </a>Getting started</h2>
<p>The main function of the package is <code>manipulateWidget</code>. It accepts an expression that generates an interactive chart (and more precisely an htmlwidget object. See <a href="http://www.htmlwidgets.org/" class="uri">http://www.htmlwidgets.org/</a> if you have never heard about it) and a set of controls created with functions mwSlider, mwCheckbox… which are used to dynamically change values within the expression. Each time the user modifies the value of a control, the expression is evaluated again and the chart is updated. Consider the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(
  <span class="kw">myPlotFun</span>(country), 
  <span class="dt">country =</span> <span class="kw"><a href="reference/mwSelect.html">mwSelect</a></span>(<span class="kw">c</span>(<span class="st">"BE"</span>, <span class="st">"DE"</span>, <span class="st">"ES"</span>, <span class="st">"FR"</span>))
)</code></pre></div>
<p>It generates a graphical interface with a select input on its left with options “BE”, “DE”, “ES”, “FR”. The value of this input is mapped to the variable <code>country</code> in the expression. By default, at the beginning the value of <code>country</code> will be equal to the first choice of the input. So the function will first execute <code>myPlotFun("BE")</code> and the result will be displayed in the main panel of the interface. If the user changes the value to “FR”, then the expression <code>myPlotFun("FR")</code> is evaluated and the new result is displayed.</p>
<p>The interface also contains a button “Done”. When the user clicks on it, the last chart is returned. It can be stored in a variable, be modified by the user, saved as a html file with saveWidget from package htmlwidgets or converted to a static image file with package <code>webshot</code>.</p>
<p>Of course, you can create as many controls as you want. The interface of the animated example in the introduction was generated with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(
  <span class="kw">myPlotFun</span>(distribution, range, title),
  <span class="dt">distribution =</span> <span class="kw"><a href="reference/mwSelect.html">mwSelect</a></span>(<span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">"gaussian"</span>, <span class="st">"uniform"</span>)),
  <span class="dt">range =</span> <span class="kw"><a href="reference/mwSlider.html">mwSlider</a></span>(<span class="dv">2000</span>, <span class="dv">2100</span>, <span class="dt">value =</span> <span class="kw">c</span>(<span class="dv">2000</span>, <span class="dv">2100</span>), <span class="dt">label =</span> <span class="st">"period"</span>),
  <span class="dt">title =</span> <span class="kw"><a href="reference/mwText.html">mwText</a></span>()
)</code></pre></div>
<p>To see all available controls that can be added to the UI, take a look at the list of the functions of the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="dt">package =</span> <span class="st">"manipulateWidget"</span>)</code></pre></div>
</div>
<div id="combining-widgets" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-widgets" class="anchor"> </a>Combining widgets</h2>
<p>The <code>combineWidgets</code> function gives an easy way to combine interactive charts (like <code>par(mfrow = c(...))</code> or <code>layout</code> for static plots). To do it, one has simply to pass to the function the widgets to combine. In the next example, we visualize two random time series with dygraphs and combine them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dygraphs)

plotRandomTS &lt;-<span class="st"> </span>function(id) {
  <span class="kw">dygraph</span>(<span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span>:<span class="dv">10</span>, <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)), <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">"Random plot"</span>, id))
}

<span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(<span class="kw">plotRandomTS</span>(<span class="dv">1</span>), <span class="kw">plotRandomTS</span>(<span class="dv">2</span>))</code></pre></div>
<div id="htmlwidget-13ad1110ecbd44b0bff2" style="width:672px;height:480px;" class="combineWidgets html-widget"></div>
<script type="application/json" data-for="htmlwidget-13ad1110ecbd44b0bff2">{"x":{"data":[{"attrs":{"title":"Random plot 1","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[-1.18878785300084,0.0287730419420928,-0.204843748741917,-0.593908154162786,0.817802323044166,0.675293484967827,-1.0830946861697,-1.16751746885291,-0.208273392232749,0.073466268441575]]},{"attrs":{"title":"Random plot 2","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[-0.845803589554025,0.0164143226310249,0.16141341435732,-0.0498050493913041,-0.29647235312564,0.267035788430747,0.296837384429181,2.55913537267749,-2.28017260664656,-1.04440161404852]]}],"widgetType":["dygraphs","dygraphs"],"elementId":["widget509687736","widget616561634"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget509687736\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget616561634\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div>\u003c/div>\u003c/div>\u003c/div>"},"evals":[],"jsHooks":[]}</script><p>The functions tries to find the best number of columns and rows. But one can control them with parameters <code>nrow</code>and <code>ncol</code>. It is also possible to control their relative size with parameters <code>rowsize</code> and <code>colsize</code>. To achieve complex layouts, it is possible to use nested combined widgets. Here is an example of a complex layout. (Note that this is only a screenshot of the result. In reality, these charts are interactive).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(
  <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">colsize =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>),
  <span class="kw">plotRandomTS</span>(<span class="dv">1</span>),
  <span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(
    <span class="dt">ncol =</span> <span class="dv">1</span>,
    <span class="kw">plotRandomTS</span>(<span class="dv">2</span>),
    <span class="kw">plotRandomTS</span>(<span class="dv">3</span>),
    <span class="kw">plotRandomTS</span>(<span class="dv">4</span>)
  )
)</code></pre></div>
<div id="htmlwidget-81e11bc528a11b18b739" style="width:672px;height:480px;" class="combineWidgets html-widget"></div>
<script type="application/json" data-for="htmlwidget-81e11bc528a11b18b739">{"x":{"data":[{"attrs":{"title":"Random plot 1","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.832648054174689,1.64567647337068,-0.0271644303665689,0.986263013598663,0.663226540260467,-1.46873992439021,1.05927227841105,-0.789837808069098,-0.218248244560868,0.774480501581118]]},{"data":[{"attrs":{"title":"Random plot 2","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.829833283318361,-0.748667782318963,0.966692395775919,-0.642177419501434,-0.984422891429614,0.689826937032251,0.34574992437441,0.494882362572241,1.32038822145288,-3.2288775913046]]},{"attrs":{"title":"Random plot 3","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[1.35722388219408,0.430955781713669,0.277875465479332,1.10201524790391,-0.671226095112988,0.234465619889802,1.52773791899575,0.128141600992316,-0.719585102645492,0.668737309339948]]},{"attrs":{"title":"Random plot 4","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.200430354770039,-0.257021418141446,1.73253003892942,-2.02755932918975,0.49806313930327,-0.158139654701839,-1.70224475180598,-0.985579800309576,-0.559889661923231,-0.0667064929092506]]}],"widgetType":["dygraphs","dygraphs","dygraphs"],"elementId":["widget593402734","widget376287764","widget352211635"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget593402734\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget376287764\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget352211635\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div>\u003c/div>\u003c/div>\u003c/div>"}],"widgetType":["dygraphs","combineWidgets"],"elementId":["widget920327824","widget201395821"],"html":"<div class=\"cw-container\"><div class=\"cw-subcontainer\"><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:2;-webkit-flex:2\">\n                 <div id=\"widget920327824\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget201395821\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div>\u003c/div>\u003c/div>\u003c/div>"},"evals":[],"jsHooks":[]}</script><p>Even if the main use of <code>combineWidgets</code> is to combine <code>htmlwidgets</code>, it can also display text or html tags. It can be useful to include comments in a chart. Moreover it has arguments to add a title and to add some html content in the sides of the chart.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(
  <span class="kw">plotRandomTS</span>(<span class="dv">1</span>),
  <span class="kw">plotRandomTS</span>(<span class="dv">2</span>),
  <span class="kw">plotRandomTS</span>(<span class="dv">3</span>),
  <span class="kw">plotRandomTS</span>(<span class="dv">4</span>),
  <span class="dt">title =</span> <span class="st">"Four random plots"</span>,
  <span class="dt">header =</span> <span class="st">"Here goes the header content. &lt;span style='color:red'&gt;It can include html code&lt;/span&gt;."</span>,
  <span class="dt">footer =</span> <span class="st">"Here goes the footer content."</span>,
  <span class="dt">leftCol =</span> <span class="st">"&lt;div style='margin-top:150px;'&gt;left column&lt;/div&gt;"</span>,
  <span class="dt">rightCol =</span> <span class="st">"&lt;div style='margin-top:150px;'&gt;right column&lt;/div&gt;"</span>
)</code></pre></div>
<div id="htmlwidget-d638d16aae2478106f68" style="width:672px;height:480px;" class="combineWidgets html-widget"></div>
<script type="application/json" data-for="htmlwidget-d638d16aae2478106f68">{"x":{"data":[{"attrs":{"title":"Random plot 1","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.99301513962044,-0.475171322936515,0.0389987585661704,0.571413449157434,1.00699255094404,0.150735544870434,-0.276822479310611,1.28832524979102,0.369947911026105,-0.358348792873142]]},{"attrs":{"title":"Random plot 2","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.555415567425279,-0.473678734932856,0.26625511080136,0.586136354682193,-0.630913554227142,0.0699684505861917,-0.0515436945847965,0.0688369623280518,0.836235353441918,-1.13063607286924]]},{"attrs":{"title":"Random plot 3","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[0.410746773916356,0.129642457542908,0.348145143246808,1.34219977427186,0.444732324236782,-0.530391953019049,1.21283919958679,-0.0970084151033794,-1.04990823178186,0.141281929389378]]},{"attrs":{"title":"Random plot 4","labels":["x","y"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}}},"annotations":[],"shadings":[],"events":[],"format":"numeric","data":[[1,2,3,4,5,6,7,8,9,10],[1.03559182807087,-0.563799972220361,-0.973957329927097,-0.809433117274518,1.04813951534846,0.343150835083195,1.39447707929106,1.02428834389514,0.866668916056654,-0.875610676985226]]}],"widgetType":["dygraphs","dygraphs","dygraphs","dygraphs"],"elementId":["widget317523468","widget870003596","widget957627473","widget452308108"],"html":"<div class=\"cw-container\"><div><h2 class=\"cw-title\" style=\"\">Four random plots\u003c/h2>\u003c/div><div>Here goes the header content. <span style='color:red'>It can include html code\u003c/span>.\u003c/div><div class=\"cw-subcontainer\"><div style='height:100%'><div style='margin-top:150px;'>left column\u003c/div>\u003c/div><div class=\"cw-content cw-by-row\"><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget317523468\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget870003596\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div><div class=\"cw-row cw-by-row\" style=\"flex:1;-webkit-flex:1\"><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget957627473\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div><div class=\"cw-col\" style=\"flex:1;-webkit-flex:1\">\n                 <div id=\"widget452308108\" class=\"cw-widget\" style=\"width:100%;height:100%\">\u003c/div>\n               \u003c/div>\u003c/div>\u003c/div><div style='height:100%'><div style='margin-top:150px;'>right column\u003c/div>\u003c/div>\u003c/div><div>Here goes the footer content.\u003c/div>\u003c/div>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="advanced-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#advanced-usage" class="anchor"> </a>Advanced usage</h2>
<div id="grouping-controls" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-controls" class="anchor"> </a>Grouping controls</h3>
<p>If you have a large number of inputs, you can easily group them. To do so, simply pass to the function <code>manipulateWidget</code> a list of inputs instead of passing directly the inputs. Here is a toy example. Groups are by default collapsed and user can click on their title to display/collapse then.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydata &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span>:<span class="dv">100</span>, <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(
  <span class="kw">dygraph</span>(mydata[range[<span class="dv">1</span>]:range[<span class="dv">2</span>], ],
          <span class="dt">main =</span> title, <span class="dt">xlab =</span> xlab, <span class="dt">ylab =</span> ylab),
  <span class="dt">range =</span> <span class="kw"><a href="reference/mwSlider.html">mwSlider</a></span>(<span class="dv">1</span>, <span class="dv">100</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">100</span>)),
  <span class="st">"Graphical parameters"</span> =<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">title =</span> <span class="kw"><a href="reference/mwText.html">mwText</a></span>(<span class="st">"Fictive time series"</span>),
    <span class="dt">xlab =</span> <span class="kw"><a href="reference/mwText.html">mwText</a></span>(<span class="st">"X axis label"</span>),
    <span class="dt">ylab =</span> <span class="kw"><a href="reference/mwText.html">mwText</a></span>(<span class="st">"Y axis label"</span>)
  )
)</code></pre></div>
<div class="figure">
<img src="vignettes/groups-inputs.gif" alt="Grouping inputs"><p class="caption">Grouping inputs</p>
</div>
</div>
<div id="conditional-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#conditional-inputs" class="anchor"> </a>Conditional inputs</h3>
<p>Sometimes some inputs are relevant only if other inputs have some value. <code>manipulateWidget</code>provides a way to show/hide inputs conditionally to the value of the other inputs thanks to parameter <code>.display</code>. This parameter expects a named list of expressions. The names are the ones of the inputs to show/hide and the expressions can include any input and have to evaluate to <code>TRUE/FALSE</code>. Here is a toy example, using package <code>plot_ly</code>. User can choose points or lines to represent some data. If he chooses lines, then an input appears to let him choose the width of the lines.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydata &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span>:<span class="dv">100</span>, <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">100</span>))

myPlot &lt;-<span class="st"> </span>function(type, lwd) {
  if (type ==<span class="st"> "points"</span>) {
    <span class="kw">plot_ly</span>(mydata, <span class="dt">x=</span> ~x, <span class="dt">y =</span> ~y, <span class="dt">type =</span> <span class="st">"scatter"</span>, <span class="dt">mode =</span> <span class="st">"markers"</span>)
  } else {
    <span class="kw">plot_ly</span>(mydata, <span class="dt">x=</span> ~x, <span class="dt">y =</span> ~y, <span class="dt">type =</span> <span class="st">"scatter"</span>, <span class="dt">mode =</span> <span class="st">"lines"</span>, 
            <span class="dt">line =</span> <span class="kw">list</span>(<span class="dt">width =</span> lwd))
  }
}

<span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(
  <span class="kw">myPlot</span>(type, lwd),
  <span class="dt">type =</span> <span class="kw"><a href="reference/mwSelect.html">mwSelect</a></span>(<span class="kw">c</span>(<span class="st">"points"</span>, <span class="st">"lines"</span>), <span class="st">"points"</span>),
  <span class="dt">lwd =</span> <span class="kw"><a href="reference/mwSlider.html">mwSlider</a></span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">1</span>),
  <span class="dt">.display =</span> <span class="kw">list</span>(<span class="dt">lwd =</span> type ==<span class="st"> "lines"</span>)
)</code></pre></div>
<div class="figure">
<img src="vignettes/conditional-inputs.gif" alt="Conditional inputs"><p class="caption">Conditional inputs</p>
</div>
</div>
<div id="updating-a-widget" class="section level3">
<h3 class="hasAnchor">
<a href="#updating-a-widget" class="anchor"> </a>Updating a widget</h3>
<p>The “normal” use of <code>manipulateWidget</code> is to provide an expression that always return an <code>htmlwidget</code>. In such case, every time the user changes the value of an input, the current widget is destroyed and a new one is created and rendered. This behavior is not optimal and sometimes it can be painful for the user: consider for instance an interactive map. Each time user changes an input, the map is destroyed and created again, then zoom and location on the map are lost every time.</p>
<p>Some packages provide functions to update a widget that has already been rendered. This is the case for instance for package <code>leaflet</code> with the function <code>leafletProxy</code>. To use such functions, <code>manipulateWidget</code> evaluates the parameter <code>.expr</code> with two extra variables:</p>
<ul>
<li><p><code>.initial</code>: <code>TRUE</code> if the expression is evaluated for the first time and then the widget has not been rendered yet, <code>FALSE</code> if the widget has already been rendered.</p></li>
<li><p><code>.session</code>: A shiny session object.</p></li>
</ul>
<p>Moreover the ID of the rendered widget is always “output”. Then it is quite easy to write an expression that initializes a widget when it is evaluated the first time and then that updates this widget. Here is an example using package <code>leaflet</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lon &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">20</span>)
lat &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dt">sd =</span> <span class="dv">20</span>)

myMapFun &lt;-<span class="st"> </span>function(radius, color, initial, session) {
  if (initial) {
    <span class="co"># Widget has not been rendered</span>
    map &lt;-<span class="st"> </span><span class="kw">leaflet</span>() %&gt;%<span class="st"> </span><span class="kw">addTiles</span>()
  } else {
    <span class="co"># widget has already been rendered</span>
    map &lt;-<span class="st"> </span><span class="kw">leafletProxy</span>(<span class="st">"output"</span>, session) %&gt;%<span class="st"> </span><span class="kw">clearMarkers</span>()
  }

  map %&gt;%<span class="st"> </span><span class="kw">addCircleMarkers</span>(lon, lat, <span class="dt">radius =</span> radius, <span class="dt">color =</span> color)
}

<span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(<span class="kw">myMapFun</span>(radius, color, .initial, .session),
                 <span class="dt">radius =</span> <span class="kw"><a href="reference/mwSlider.html">mwSlider</a></span>(<span class="dv">5</span>, <span class="dv">30</span>, <span class="dv">10</span>),
                 <span class="dt">color =</span> <span class="kw"><a href="reference/mwSelect.html">mwSelect</a></span>(<span class="kw">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span>)))</code></pre></div>
<div class="figure">
<img src="vignettes/update-widget.gif" alt="Conditional inputs"><p class="caption">Conditional inputs</p>
</div>
</div>
</div>
<div id="by-the-way" class="section level2">
<h2 class="hasAnchor">
<a href="#by-the-way" class="anchor"> </a>By the way</h2>
<p>Here is the complete code to generate the animated example in the introduction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dygraphs)
<span class="kw">library</span>(plotly)
<span class="kw">library</span>(manipulateWidget)

myPlotFun &lt;-<span class="st"> </span>function(distribution, range, title) {
  randomFun &lt;-<span class="st"> </span>switch(distribution, <span class="dt">gaussian =</span> rnorm, <span class="dt">uniform =</span> runif)
  myData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
    <span class="dt">year =</span> <span class="kw">seq</span>(range[<span class="dv">1</span>], range[<span class="dv">2</span>]),
    <span class="dt">value =</span> <span class="kw">randomFun</span>(<span class="dt">n =</span> <span class="kw">diff</span>(range) +<span class="st"> </span><span class="dv">1</span>)
  )
  <span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(
    <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">colsize =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>),
    <span class="kw">dygraph</span>(myData, <span class="dt">main =</span> title),
    <span class="kw"><a href="reference/combineWidgets.html">combineWidgets</a></span>(
      <span class="kw">plot_ly</span>(<span class="dt">x =</span> myData$value, <span class="dt">type =</span> <span class="st">"histogram"</span>),
      <span class="kw">paste</span>(
        <span class="st">"The graph on the left represents a random time series generated using a &lt;b&gt;"</span>,
        distribution, <span class="st">"&lt;/b&gt;distribution function.&lt;br/&gt;"</span>,
        <span class="st">"The chart above represents the empirical distribution of the generated values."</span>
      )
    )
  )
  
}

<span class="kw"><a href="reference/manipulateWidget.html">manipulateWidget</a></span>(
  <span class="kw">myPlotFun</span>(distribution, range, title),
  <span class="dt">distribution =</span> <span class="kw"><a href="reference/mwSelect.html">mwSelect</a></span>(<span class="dt">choices =</span> <span class="kw">c</span>(<span class="st">"gaussian"</span>, <span class="st">"uniform"</span>)),
  <span class="dt">range =</span> <span class="kw"><a href="reference/mwSlider.html">mwSlider</a></span>(<span class="dv">2000</span>, <span class="dv">2100</span>, <span class="dt">value =</span> <span class="kw">c</span>(<span class="dv">2000</span>, <span class="dv">2100</span>), <span class="dt">label =</span> <span class="st">"period"</span>),
  <span class="dt">title =</span> <span class="kw"><a href="reference/mwText.html">mwText</a></span>()
)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=manipulateWidget">https://​cran.r-project.org/​package=manipulateWidget</a>
</li>
</ul>
<h2>License</h2>
<p>GPL (&gt;= 2) | file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Francois Guillem <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Francois Guillem.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
